(this.webpackJsonpmpharma_products_mgr=this.webpackJsonpmpharma_products_mgr||[]).push([[0],{110:function(e,t,c){},111:function(e,t,c){},140:function(e,t,c){"use strict";c.r(t);var n={};c.r(n),c.d(n,"loadProducts",(function(){return I})),c.d(n,"removeProduct",(function(){return _})),c.d(n,"addProduct",(function(){return N})),c.d(n,"editProduct",(function(){return T}));var r=c(0),a=c.n(r),i=c(12),o=c.n(i),d=(c(110),c(111),c(183)),u=c(39),s=c(14),l=c(187),b=c(169),j=c(170),O=c(171),p=c(184),h=c(173),f=c(174),x=c(94),v=c(185),g=c(188),m=c(175),y=c(176),P=c(87),S=c.n(P),C=c(16),w="LOAD_PRODUCTS",k="REMOVE_PRODUCT",E="ADD_PRODUCT",D="EDIT_PRODUCT",I=function(e){return function(t){t({type:w,payload:e})}},_=function(e){return function(t){t({type:k,payload:e})}},N=function(e){return function(t){t({type:E,payload:e})}},T=function(e){return function(t){t({type:D,payload:e})}},A=c(20),F=c(5);function R(e){Object(C.c)((function(e){return e}));var t=Object(C.b)(),c=Object(A.b)(n,t).addProduct,a=e.open,i=e.setOpen,o=Object(r.useState)(""),d=Object(s.a)(o,2),u=d[0],x=d[1],v=Object(r.useState)(0),g=Object(s.a)(v,2),m=g[0],y=g[1],P=Object(r.useState)(""),S=Object(s.a)(P,2),w=S[0],k=S[1],E=Object(r.useState)(!1),D=Object(s.a)(E,2),I=D[0],_=D[1],N=Object(r.useState)(!1),T=Object(s.a)(N,2),R=T[0],W=T[1],J=Object(r.useState)(""),U=Object(s.a)(J,2),L=U[0],$=U[1];Object(r.useEffect)((function(){return 0===u.length?(_(!0),void k("Product can't be empty!")):m<0?(W(!0),void $("Price cannot be a negative amount!")):0===m.length?(W(!0),void $("Price cannot be empty!")):isNaN(m)?(W(!0),void $("Price is not a number!")):(_(!1),k(""),W(!1),void $(""))}),[u,m]);return Object(F.jsxs)(l.a,{"aria-labelledby":"add-new-title",open:a,children:[Object(F.jsx)(b.a,{id:"add-new-title",children:"Add New Product"}),Object(F.jsx)(j.a,{children:Object(F.jsxs)(O.a,{children:[Object(F.jsx)(p.a,{id:"outlined-basic",label:"Product",variant:"outlined",value:u,fullWidth:!0,onChange:function(e){return x(e.target.value)},error:I,helperText:w}),Object(F.jsx)(p.a,{id:"outlined-basic",label:"Enter Price ($)",variant:"outlined",value:m,fullWidth:!0,onChange:function(e){return y(e.target.value)},error:R,helperText:L})]})}),Object(F.jsxs)(h.a,{children:[Object(F.jsx)(f.a,{onClick:function(){i(!1)},color:"primary",children:"Cancel"}),Object(F.jsx)(f.a,{onClick:function(){i(!1),c({name:u,price:m,date:(new Date).toISOString()})},color:"primary",autoFocus:!0,disabled:R||I,children:"Okay"})]})]})}var W=Object(x.a)(v.a)(Object(u.a)({background:"hsla(19, 100%, 50%, 1)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:48,padding:"0 30px"},"height","100px"));function J(){var e=U(),t=Object(r.useState)(!1),c=Object(s.a)(t,2),n=c[0],a=c[1];return Object(F.jsxs)(W,{children:[Object(F.jsxs)("h1",{className:e.heading,children:["mPharma Products",Object(F.jsx)(g.a,{title:"Add Product",children:Object(F.jsx)(m.a,{color:"secondary","aria-label":"add",className:e.fab,onClick:function(){return a((function(e){return!e}))},children:Object(F.jsx)(S.a,{})})})]}),Object(F.jsx)(R,{open:n,setOpen:a})]})}var U=Object(y.a)({heading:{flex:1,textAlign:"left",paddingTop:25},fab:{float:"right",backgroundColor:"white",color:"hsla(19, 100%, 50%, 1)","&:hover":{backgroundColor:"hsla(151, 0%, 63%, 1)"}}}),L=c(182),$=c(177),B=c(178),M=c(189),z=c(179),V=c(43),q=c(180),G=c(190),H=c(181),K=c(88),Q=c.n(K),X=c(89),Y=c.n(X);function Z(e){var t=Object(C.b)(),c=Object(A.b)(n,t).editProduct,a=e.open,i=e.setOpen,o=e.productname,d=e.productid,x=Object(r.useState)(o),v=Object(s.a)(x,2),g=v[0],m=v[1],y=Object(r.useState)(""),P=Object(s.a)(y,2),S=P[0],w=P[1],k=Object(r.useState)(!1),E=Object(s.a)(k,2),D=E[0],I=E[1],_=Object(r.useState)(!1),N=Object(s.a)(_,2),T=N[0],R=N[1],W=Object(r.useState)(""),J=Object(s.a)(W,2),U=J[0],L=J[1],$=Object(r.useState)(0),B=Object(s.a)($,2),M=B[0],z=B[1];Object(r.useEffect)((function(){return 0===g.length?(I(!0),void w("Product can't be empty!")):M<0?(R(!0),void L("Price cannot be a negative amount!")):0===M.length?(R(!0),void L("Price cannot be empty!")):isNaN(M)?(R(!0),void L("Price is not a number!")):(I(!1),w(""),R(!1),void L(""))}),[g,M]);return Object(F.jsxs)(l.a,{"aria-labelledby":"add-new-title",open:a,children:[Object(F.jsxs)(b.a,{id:"add-new-title",children:["Edit Product (",o,")"]}),Object(F.jsx)(j.a,{children:Object(F.jsxs)(O.a,{children:[Object(F.jsx)(p.a,{id:"outlined-basic",label:"Product",variant:"outlined",value:g,fullWidth:!0,onChange:function(e){return m(e.target.value)},error:D,helperText:S}),Object(F.jsx)(p.a,{id:"outlined-basic",label:"Enter Price",value:M,variant:"outlined",fullWidth:!0,onChange:function(e){return z(e.target.value)},error:T,helperText:U})]})}),Object(F.jsxs)(h.a,{children:[Object(F.jsx)(f.a,{onClick:function(){i(!1)},color:"primary",children:"Cancel"}),Object(F.jsx)(f.a,{onClick:function(){i(!1),c(Object(u.a)({product_id:d,product:o,date:(new Date).toISOString(),price:M},"price",M))},color:"primary",autoFocus:!0,disabled:T||D,children:"Okay"})]})]})}var ee=Object(y.a)({root:{maxWidth:250,margin:15}});function te(e){var t,c=e.product,a=e.prices,i=Object(r.useState)(!1),o=Object(s.a)(i,2),d=o[0],u=o[1],l=ee(),b=Object(C.b)(),j={date:null===(t=a[c.prices[0]])||void 0===t?void 0:t.date,priceIndex:c.prices[0]},O=Object(A.b)(n,b).removeProduct;c.prices.forEach((function(e){new Date(j.date)<new Date(a[e].date)&&(j.date=a[e].date,j.priceIndex=e)}));return Object(F.jsxs)($.a,{className:l.root,children:[Object(F.jsx)(B.a,{avatar:Object(F.jsx)(M.a,{"aria-label":"recipe",className:l.avatar,children:c.name[0]}),action:Object(F.jsx)(g.a,{title:"Delete",children:Object(F.jsx)(z.a,{"aria-label":"close",onClick:function(){O({product_id:c.id})},children:Object(F.jsx)(Q.a,{})})}),title:Object(F.jsx)(V.a,{color:"secondary",children:c.name}),subheader:Object(F.jsxs)(V.a,{color:"primary",children:["$",a[j.priceIndex].price]})}),Object(F.jsxs)(q.a,{children:[Object(F.jsx)(V.a,{children:"Previous Prices"}),c.prices.map((function(e,t){if(e!==j.priceIndex)return Object(F.jsx)(g.a,{title:"previous price @ ".concat(a[e].date),children:Object(F.jsx)(G.a,{label:"$".concat(a[e].price),disabled:!0,size:"small",variant:"outlined"},t)})}))]}),Object(F.jsx)(H.a,{style:{justifyContent:"flex-end"},children:Object(F.jsx)(g.a,{title:"Edit Product",children:Object(F.jsx)(z.a,{"aria-label":"Edit Product",onClick:function(){u(!0)},children:Object(F.jsx)(Y.a,{})})})}),Object(F.jsx)(Z,{open:d,setOpen:u,productname:c.name,productid:c.id})]})}function ce(){var e,t=Object(C.c)((function(e){return e}));return console.log("current State!!!"),console.log(t),Object(F.jsx)("div",{style:{padding:20},children:Object(F.jsx)(L.a,{container:!0,spacing:5,children:t.result&&(null===(e=t.result)||void 0===e?void 0:e.map((function(e){return Object(F.jsx)(te,{index:e,product:t.entities.products[e],prices:t.entities.prices},e)})))})})}function ne(){return Object(F.jsxs)(d.a,{maxWidth:"lg",children:[Object(F.jsx)(J,{}),Object(F.jsx)(ce,{})]})}var re=c(67),ae=c.n(re),ie=c(90),oe=function(){var e=Object(ie.a)(ae.a.mark((function e(){var t;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,localStorage.getItem("productsState");case 3:if(null!==(t=e.sent)){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.abrupt("return",JSON.parse(t));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),de=c(55),ue=c(91),se=c.n(ue);var le=function(){var e=Object(C.c)((function(e){return e})),t=Object(C.b)(),c=Object(A.b)(n,t).loadProducts,a=new de.b.Entity("prices"),i=new de.b.Entity("products",{prices:[a]});return Object(r.useEffect)((function(){null===localStorage.getItem("productsState")?se()("http://www.mocky.io/v2/5c3e15e63500006e003e9795").then((function(e){var t=Object(de.a)(e.data.products,[i]);c(t)})):oe().then((function(e){return c(e)}))}),[]),Object(r.useEffect)((function(){e!=={}&&function(e){try{var t=JSON.stringify(e);localStorage.setItem("productsState",t)}catch(c){console.log(c)}}(e)}),[e]),Object(F.jsx)("div",{className:"App",children:Object(F.jsx)(ne,{})})},be=c(93),je=c(21),Oe=function(e,t){switch(t.type){case w:return Object(je.a)(Object(je.a)({},e),{},{entities:t.payload.entities,result:t.payload.result});case k:var c=t.payload.product_id,n=e.entities;delete n.products[c];var r=e.result;return r=r.filter((function(e){return e!==c})),Object(je.a)(Object(je.a)({},e),{},{entities:n,result:r});case E:var a=t.payload,i=e.result[e.result.length-1]+1,o=Object.keys(e.entities.prices),d=e.entities.prices[o.length].id+1,u={id:i,name:a.name,prices:[d]},s=Object(je.a)({},e.entities);return s.products[i]=u,s.prices[d]={id:d,price:parseInt(a.price),date:a.date},Object(je.a)(Object(je.a)({},e),{},{entities:s,result:e.result.concat(i)});case D:var l=Object.keys(e.entities.prices),b=e.entities.prices[l.length].id+1,j=t.payload,O=e.entities.products[j.product_id],p=Object(je.a)({},e.entities);return p.prices[b]={id:b,price:parseInt(j.price),date:j.date},p.products[j.product_id]={id:j.product_id,name:j.product,prices:[].concat(Object(be.a)(O.prices),[b])},Object(je.a)(Object(je.a)({},e),{},{entities:p})}return e},pe=c(92),he=Object(A.c)(Oe,{},Object(A.a)(pe.a)),fe=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,192)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),n(e),r(e),a(e),i(e)}))};o.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(C.a,{store:he,children:Object(F.jsx)(le,{})})}),document.getElementById("root")),fe()}},[[140,1,2]]]);
//# sourceMappingURL=main.ecf87cfe.chunk.js.map